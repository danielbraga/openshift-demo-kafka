<!DOCTYPE html>
<html layout:decorate="~{layout}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <title>Consultas</title>
</head>
<body>
<section layout:fragment="content">

    <div class="row">
        <div class="col-lg-12 grid-margin stretch-card">
            <div class="card">

                <div class="card-body">
                    <h4 class="card-title">Lista de Consultas</h4>
                    <div class="row">
                        <div class="col-md-12">
                        <p class="card-description">
                            Todas as consultas que precisam de validação aparecem aqui.
                        </p>
                        </div>
                    </div>
                    <div class="table-responsive" >
                        <table class="table table-striped table-sm text-center">
                            <thead>
                            <tr>
                                <th>
                                    Id
                                </th>
                                <th>
                                    Status
                                </th>
                                <th>
                                    Ação
                                </th>
                                <th>
                                   Rede/Serviço
                                </th>
                                <th>
                                    Servidor
                                </th>
                                <th>
                                    Query
                                </th>
                                <th>
                                    Linguagem
                                </th>
                                <th>
                                    Cadastro
                                </th>
                                <th>
                                    Ações
                                </th>

                            </tr>
                            </thead>
                            <tbody>
                                <tr th:each="consulta: ${consultas}">
<!--                                    id-->
                                    <td class="col-md-1" th:text="${consulta.id}" />
                                    </td>
<!--                                    status-->
                                    <td class="col-md-2">
                                        <div class="badge" th:classappend="${'badge-'+consulta.status.classe} " th:text="${consulta.status.descricao}"></div>
                                    </td>
<!--                                    acao-->
                                    <td class="col-md-2">
                                        <div class="badge" th:classappend="${'badge-'+consulta.acao.classe} " th:text="${consulta.acao.descricao}"></div>
                                    </td>
<!--                                    servico-->
                                    <td class="col-md-1">
                                        <img th:src="@{${'https://imagens.vtracker.com.br/servicos/' + consulta.rede +'.png'}}" />

                                    </td>
<!--                                    servidor-->
                                    <td  class="col-md-1" th:text="${consulta.siglaServidor}" />
<!--                                    query-->
                                    <td class="col-md-4" th:text="${'URL: '+consulta.url+' EXP: '+consulta.expressao}"/>
<!--                                    linguagem-->
                                    <td class="col-md-4" th:text="${consulta.linguagem}"/>
<!--                                    data cadastro-->
                                    <td class="col-md-2" th:text="${consulta.dataCadastro}" />
<!--                                   acoes-->
                                    <td class="col-md-1">
                                        <a th:href="@{/pages/consulta/(id=${consulta.id})}">
                                            <i class="menu-icon mdi mdi-magnify"></i>
                                        </a>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                        <div th:if="${totalPages > 1}">
                            <nav>
                                Total de [[${totalItems}]] itens e [[${totalPages}]] páginas, página atual: [[${currentPage+1}]]
                                <ul class="pagination">
                                    <li class="page-item" th:classappend="${currentPage==0} ? disabled : enabled">
                                        <a class="page-link" th:href="@{'/pages/consultas?page=0'}" tabindex="-1"><<</a>
                                    </li>
                                    <li class="page-item" th:classappend="${currentPage==0} ? disabled : enabled">
                                        <a class="page-link" th:href="@{'/pages/consultas?page=' + ${currentPage-1}}" tabindex="-1"><</a>
                                    </li>
                                    <li class="page-item" th:classappend="${currentPage==totalPages-1} ? disabled : enabled">
                                        <a class="page-link" th:href="@{'/pages/consultas?page=' + ${currentPage+1}}" tabindex="-1">></a>
                                    </li>
                                    <li class="page-item" th:classappend="${currentPage==totalPages-1} ? disabled : enabled">
                                        <a class="page-link" th:href="@{'/pages/consultas?page=' + ${totalPages-1}}" tabindex="-1">>></a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</section>
</body>
</html>
